-- Monolyth — Supabase schema snapshot (Week 2)
-- Generated: 2025-11-11
create extension if not exists pgcrypto;
create extension if not exists "uuid-ossp";

INSERT INTO "public"."documents" ("id", "owner_id", "title", "status", "created_at") VALUES ('30ceb9af-6481-4ff9-8620-1eab38dfef50', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Mutual NDA — 2025-11-07', 'draft', '2025-11-07 05:41:30.385002+00'), ('4ba315ff-1b6f-4199-915b-de86b6c0b703', '87bcb510-e82a-4305-b576-48d94eb2ff2f', 'Test doc', 'draft', '2025-11-04 03:13:18.340483+00'), ('63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Mutual NDA — 2025-11-07', 'draft', '2025-11-07 05:46:23.589503+00'), ('87326ff8-eec7-4d58-a575-664c25078273', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Contract Termination Notice — 2025-11-07', 'draft', '2025-11-07 09:29:50.223819+00'), ('cde1e828-0c1d-4280-a810-f9f73364efd9', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Mutual NDA — 2025-11-07', 'draft', '2025-11-07 13:39:05.805515+00');

INSERT INTO "public"."versions" ("id", "doc_id", "number", "content_url", "checksum", "created_at", "content_md") VALUES ('0b3442fe-2dda-4f10-afe7-265664764074', '87326ff8-eec7-4d58-a575-664c25078273', '1', '/generated/214f354f-9a8d-443c-9621-1968d4125ee7.md', null, '2025-11-07 09:29:50.955055+00', null), ('0e7486a8-1554-4e0e-bd21-cf0d1449ed3a', 'cde1e828-0c1d-4280-a810-f9f73364efd9', '1', '/generated/d545ac51-c760-49bd-9b4e-ade8b45bd218.md', null, '2025-11-07 13:39:06.70916+00', '# Test Share

Hello world — shared from Monolyth.'), ('3e93d7dc-d890-421e-b49c-eceea976a81d', '63d20469-ac51-4cb5-8032-0d6efce835cb', '1', '/generated/60c4ea20-ceba-4c86-b0df-04cdbac4b9a3.md', null, '2025-11-07 05:46:24.572722+00', null), ('f89bbfd7-1b90-41b0-a5e5-18b449ccc87d', '30ceb9af-6481-4ff9-8620-1eab38dfef50', '1', '/generated/fb31effb-e127-4181-9526-966718c501cc.md', null, '2025-11-07 05:41:31.439258+00', null);

INSERT INTO "public"."shares" ("id", "doc_id", "created_by", "access", "passcode_hash", "expires_at", "created_at", "passcode_sha256", "passcode_required", "version_id") VALUES ('16a5d16f-7146-417a-b568-ae2334305b6a', '87326ff8-eec7-4d58-a575-664c25078273', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 09:31:14.522377+00', null, 'false', null), ('4726e939-acc5-451b-9050-0efd93b8a77d', '87326ff8-eec7-4d58-a575-664c25078273', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 09:30:22.141809+00', null, 'false', null), ('48be649b-7e88-4311-8333-c6a8c7b2862e', 'cde1e828-0c1d-4280-a810-f9f73364efd9', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-09 01:23:11.466761+00', null, 'false', '0e7486a8-1554-4e0e-bd21-cf0d1449ed3a'), ('508fe6e9-889e-484d-bbc0-c56c1a6ad47f', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 07:09:39.02696+00', null, 'false', null), ('6c2d642e-d968-441d-8537-822b4c0936f3', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 07:14:57.507482+00', null, 'false', null), ('7a1711c8-4077-420a-b78c-bf32b1430fd9', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'passcode', '03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4', null, '2025-11-07 07:13:38.645343+00', null, 'false', null), ('9507641c-cc8e-491d-ba23-7e2b8023636f', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 07:27:21.406892+00', null, 'false', null), ('a868fe4f-d647-4b05-b2f7-abc0b160ade2', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 07:24:05.34829+00', null, 'false', null), ('b6cfc946-70b1-48b3-bb25-128233caae97', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 06:54:51.963707+00', null, 'false', null), ('c3aebc16-1eca-46a9-a0dd-eff6427fe777', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'passcode', '03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4', null, '2025-11-07 07:13:53.315141+00', null, 'false', null), ('ed8b7897-5709-4de6-983f-608880f7e9d5', '87326ff8-eec7-4d58-a575-664c25078273', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'passcode', '03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4', null, '2025-11-07 09:30:38.302373+00', null, 'false', null), ('ef5938b7-e622-4a32-a573-ec05aab3e611', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'public', null, null, '2025-11-07 07:13:23.625586+00', null, 'false', null);

INSERT INTO "public"."events" ("id", "doc_id", "event_type", "actor", "meta_json", "created_at", "meta", "share_id", "type", "user_agent", "ip", "referrer") VALUES ('1', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault"}', '2025-11-07 06:49:49.259393+00', null, null, null, null, null, null), ('2', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","share_id":"b6cfc946-70b1-48b3-bb25-128233caae97"}', '2025-11-07 06:54:52.50784+00', null, null, null, null, null, null), ('3', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","share_id":"508fe6e9-889e-484d-bbc0-c56c1a6ad47f"}', '2025-11-07 07:09:39.588558+00', null, null, null, null, null, null), ('4', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"public","share_id":"ef5938b7-e622-4a32-a573-ec05aab3e611"}', '2025-11-07 07:13:24.251413+00', null, null, null, null, null, null), ('5', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"passcode","share_id":"7a1711c8-4077-420a-b78c-bf32b1430fd9"}', '2025-11-07 07:13:39.266139+00', null, null, null, null, null, null), ('6', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"passcode","share_id":"c3aebc16-1eca-46a9-a0dd-eff6427fe777"}', '2025-11-07 07:13:53.877678+00', null, null, null, null, null, null), ('7', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"public","share_id":"6c2d642e-d968-441d-8537-822b4c0936f3"}', '2025-11-07 07:14:58.017577+00', null, null, null, null, null, null), ('8', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"b6cfc946-70b1-48b3-bb25-128233caae97"}', '2025-11-07 07:22:47.115616+00', null, null, null, null, null, null), ('9', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"ef5938b7-e622-4a32-a573-ec05aab3e611"}', '2025-11-07 07:22:47.138865+00', null, null, null, null, null, null), ('10', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"6c2d642e-d968-441d-8537-822b4c0936f3"}', '2025-11-07 07:22:47.163511+00', null, null, null, null, null, null), ('11', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"508fe6e9-889e-484d-bbc0-c56c1a6ad47f"}', '2025-11-07 07:22:47.310352+00', null, null, null, null, null, null), ('12', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"b6cfc946-70b1-48b3-bb25-128233caae97"}', '2025-11-07 07:23:06.489691+00', null, null, null, null, null, null), ('13', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"ef5938b7-e622-4a32-a573-ec05aab3e611"}', '2025-11-07 07:23:06.502458+00', null, null, null, null, null, null), ('14', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"508fe6e9-889e-484d-bbc0-c56c1a6ad47f"}', '2025-11-07 07:23:06.52767+00', null, null, null, null, null, null), ('15', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"6c2d642e-d968-441d-8537-822b4c0936f3"}', '2025-11-07 07:23:06.721719+00', null, null, null, null, null, null), ('16', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"public","share_id":"a868fe4f-d647-4b05-b2f7-abc0b160ade2"}', '2025-11-07 07:24:05.869367+00', null, null, null, null, null, null), ('17', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"a868fe4f-d647-4b05-b2f7-abc0b160ade2"}', '2025-11-07 07:24:07.336014+00', null, null, null, null, null, null), ('18', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"6c2d642e-d968-441d-8537-822b4c0936f3"}', '2025-11-07 07:26:43.320872+00', null, null, null, null, null, null), ('19', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"a868fe4f-d647-4b05-b2f7-abc0b160ade2"}', '2025-11-07 07:26:43.320787+00', null, null, null, null, null, null), ('20', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"508fe6e9-889e-484d-bbc0-c56c1a6ad47f"}', '2025-11-07 07:26:43.326697+00', null, null, null, null, null, null), ('21', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"ef5938b7-e622-4a32-a573-ec05aab3e611"}', '2025-11-07 07:26:43.320693+00', null, null, null, null, null, null), ('22', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"b6cfc946-70b1-48b3-bb25-128233caae97"}', '2025-11-07 07:26:43.320822+00', null, null, null, null, null, null), ('23', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"508fe6e9-889e-484d-bbc0-c56c1a6ad47f"}', '2025-11-07 07:27:00.832376+00', null, null, null, null, null, null), ('24', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"b6cfc946-70b1-48b3-bb25-128233caae97"}', '2025-11-07 07:27:00.839355+00', null, null, null, null, null, null), ('25', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"ef5938b7-e622-4a32-a573-ec05aab3e611"}', '2025-11-07 07:27:00.840672+00', null, null, null, null, null, null), ('26', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"6c2d642e-d968-441d-8537-822b4c0936f3"}', '2025-11-07 07:27:00.853286+00', null, null, null, null, null, null), ('27', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"a868fe4f-d647-4b05-b2f7-abc0b160ade2"}', '2025-11-07 07:27:00.872108+00', null, null, null, null, null, null), ('28', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"public","share_id":"9507641c-cc8e-491d-ba23-7e2b8023636f"}', '2025-11-07 07:27:21.964334+00', null, null, null, null, null, null), ('29', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', null, '{"from":"share","server":true,"share_id":"9507641c-cc8e-491d-ba23-7e2b8023636f"}', '2025-11-07 07:27:23.59173+00', null, null, null, null, null, null), ('30', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'view', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault"}', '2025-11-07 07:39:52.210549+00', null, null, null, null, null, null), ('31', '63d20469-ac51-4cb5-8032-0d6efce835cb', 'download', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault"}', '2025-11-07 07:39:56.911692+00', null, null, null, null, null, null), ('32', '87326ff8-eec7-4d58-a575-664c25078273', 'view', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault"}', '2025-11-07 09:30:11.364276+00', null, null, null, null, null, null), ('33', '87326ff8-eec7-4d58-a575-664c25078273', 'download', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault"}', '2025-11-07 09:30:15.328596+00', null, null, null, null, null, null), ('34', '87326ff8-eec7-4d58-a575-664c25078273', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"public","share_id":"4726e939-acc5-451b-9050-0efd93b8a77d"}', '2025-11-07 09:30:22.658508+00', null, null, null, null, null, null), ('35', '87326ff8-eec7-4d58-a575-664c25078273', 'view', null, '{"from":"share","server":true,"share_id":"4726e939-acc5-451b-9050-0efd93b8a77d"}', '2025-11-07 09:30:24.94809+00', null, null, null, null, null, null), ('36', '87326ff8-eec7-4d58-a575-664c25078273', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"passcode","share_id":"ed8b7897-5709-4de6-983f-608880f7e9d5"}', '2025-11-07 09:30:38.849372+00', null, null, null, null, null, null), ('37', '87326ff8-eec7-4d58-a575-664c25078273', 'share_created', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault","access":"public","share_id":"16a5d16f-7146-417a-b568-ae2334305b6a"}', '2025-11-07 09:31:15.081121+00', null, null, null, null, null, null), ('38', '87326ff8-eec7-4d58-a575-664c25078273', 'view', null, '{"from":"share","server":true,"share_id":"16a5d16f-7146-417a-b568-ae2334305b6a"}', '2025-11-07 09:31:17.037151+00', null, null, null, null, null, null), ('39', 'cde1e828-0c1d-4280-a810-f9f73364efd9', 'download', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', '{"from":"vault"}', '2025-11-07 13:39:57.725114+00', null, null, null, null, null, null), ('52', null, 'share_open', null, '{}', '2025-11-09 04:48:23.447707+00', '{"source":"sql"}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('53', null, 'share_open', null, '{}', '2025-11-09 04:48:41.249648+00', '{"source":"powershell"}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('54', null, 'share_open', null, '{}', '2025-11-09 04:55:11.125458+00', null, '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('55', null, 'share_open', null, '{}', '2025-11-09 04:55:11.403899+00', null, 'b6cfc946-70b1-48b3-bb25-128233caae97', null, null, null, null), ('56', null, 'scroll', null, '{}', '2025-11-09 04:55:11.54022+00', '{"pct":33}', 'b6cfc946-70b1-48b3-bb25-128233caae97', null, null, null, null), ('57', null, 'scroll', null, '{}', '2025-11-09 04:55:11.700866+00', '{"pct":66}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('58', null, 'scroll', null, '{}', '2025-11-09 04:55:11.706055+00', '{"pct":95}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('59', null, 'scroll', null, '{}', '2025-11-09 04:55:11.721772+00', '{"pct":33}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('60', null, 'share_open', null, '{}', '2025-11-09 05:19:16.299131+00', '{"ts":1762665557270}', 'b6cfc946-70b1-48b3-bb25-128233caae97', null, null, null, null), ('61', null, 'share_open', null, '{}', '2025-11-09 05:19:16.299592+00', '{"ts":1762665557130}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null), ('62', null, 'share_open', null, '{}', '2025-11-09 05:34:41.442961+00', '{"ts":1762666482458}', 'b6cfc946-70b1-48b3-bb25-128233caae97', null, null, null, null), ('63', null, 'share_open', null, '{}', '2025-11-09 05:35:31.4537+00', '{"ts":1762666532451}', '48be649b-7e88-4311-8333-c6a8c7b2862e', null, null, null, null);

INSERT INTO "public"."tasks" ("id", "user_id", "title", "due_at", "status", "created_at") VALUES ('12059e84-5370-49e1-907c-47f74e5e9fb4', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Nothing', null, 'open', '2025-11-07 09:23:45.12421+00'), ('7ec61edf-18c6-470e-88bf-33e13c551870', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Build UI', '2025-11-15 09:21:00+00', 'open', '2025-11-07 09:21:48.534406+00'), ('f604d76a-9ab1-4307-9c42-11bc03b79b7d', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Run', '2025-11-08 13:41:00+00', 'open', '2025-11-07 13:42:03.30326+00');

INSERT INTO "public"."calendar_events" ("id", "user_id", "title", "starts_at", "ends_at", "location", "created_at") VALUES ('bd116615-7012-461a-8ea1-434172e37450', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Dodo', '2025-11-11 13:40:00+00', '2025-11-13 13:40:00+00', null, '2025-11-07 13:40:52.325409+00'), ('c2f6523b-e450-4ee6-8cf5-37756e1f1769', 'b95f2c89-9b8e-441a-adcb-4389a0bd6266', 'Birthday', '2025-11-12 09:27:00+00', '2025-11-12 12:27:00+00', null, '2025-11-07 09:27:28.870578+00');

INSERT INTO "public"."templates" ("id", "title", "doc_type", "jurisdiction", "body_md", "tags", "created_by", "created_at") VALUES ('09032ce9-5521-43e5-8e46-c35852c1e5de', 'Founders Agreement', 'corporate', 'usa', '# Founders Agreement\n\n{{PARTIES}}\n\n{{IP_ASSIGN}}\n', '"{\"founders\",\"corporate\",\"ip\"]}', null, '2025-11-08 06:18:31.400176+00'), ('b0d79c46-c08e-4f7c-b5ce-6f43386b8eba', 'NDA (Mutual)', 'core', 'usa', '# NDA (Mutual)\n\n{{PARTIES}}\n\n{{CONFIDENTIALITY}}\n', '"{\"nda\",\"confidentiality\",\"core\"]}', null, '2025-11-08 06:18:31.400176+00');

INSERT INTO "public"."clauses" ("id", "title", "clause_type", "jurisdiction", "body_md", "tags", "created_at") VALUES ('525de12f-e3b4-4e55-b460-76826f176b4c', 'Governing Law (US/NY)', 'core', 'usa', 'This Agreement is governed by the laws of the State of New York.', '"{\"law\",\"ny\",\"core\"]}', '2025-11-08 06:18:31.400176+00'), ('bd83b004-48d6-4eb9-b419-16498dd8a5de', 'Limitation of Liability (Cap)', 'risk', 'usa', 'Liability of each party is capped at fees paid in the preceding 12 months.', '"{\"liability\",\"cap\",\"risk\"]}', '2025-11-08 06:18:31.400176+00');

-- ============================================
-- TABLE: public.roles
-- NOTE: Your table already exists in Supabase. This is a reference DDL only.
-- If you ever need to recreate it locally in a scratch DB, uncomment and run.

-- create extension if not exists pgcrypto;

-- create table if not exists public.roles (
--   id         uuid primary key default gen_random_uuid(),
--   user_id    uuid not null,               -- who holds the role
--   doc_id     uuid,                        -- optional: role scoped to a single document
--   role       text not null check (role in ('owner','editor','viewer')),
--   created_at timestamptz not null default now()
-- );

-- create index if not exists idx_roles_user_doc on public.roles(user_id, doc_id);

-- (No seed rows required; roles are assigned by app flows.)
